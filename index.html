<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Dashboard</title>
    
    <style>
        /* --- General Setup --- */
        :root {
            --color-work: #6366f1;
            --color-work-light: #818cf8;
            --color-work-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --color-wellbeing: #10b981;
            --color-wellbeing-light: #34d399;
            --color-wellbeing-gradient: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
            --color-learning: #f59e0b;
            --color-learning-light: #fbbf24;
            --color-learning-gradient: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
            --color-bg-light: #f8fafc;
            --color-card-bg: #ffffff;
            --color-text: #1e293b;
            --color-text-light: #64748b;
            --color-border: #e2e8f0;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            color: var(--color-text);
            padding: 30px 20px;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(99, 102, 241, 0.3), transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        body > * {
            position: relative;
            z-index: 1;
        }

        /* --- Header & Quote --- */
        header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.75rem;
            color: white;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
            letter-spacing: -0.5px;
        }

        #quote {
            font-size: 1.15rem;
            font-style: italic;
            color: rgba(255, 255, 255, 0.95);
            min-height: 1.2em;
            max-width: 600px;
            margin: 0 auto;
            text-shadow: 0 1px 10px rgba(0, 0, 0, 0.15);
            font-weight: 400;
        }

        /* --- Main Layout --- */
        .content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 30px;
            max-width: 1300px;
            margin: 0 auto;
        }

        /* --- Category Cards --- */
        .category {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: var(--shadow-xl);
            padding: 30px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeInUp 0.8s ease-out backwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .category:nth-child(1) { animation-delay: 0.1s; }
        .category:nth-child(2) { animation-delay: 0.2s; }
        .category:nth-child(3) { animation-delay: 0.3s; }

        .category:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl), 0 0 0 1px rgba(99, 102, 241, 0.1);
        }

        .category h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.3px;
        }

        /* Color-coding headers with gradients */
        #work h2 { 
            background: var(--color-work-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        #wellbeing h2 {
            background: var(--color-wellbeing-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .breathing-exercise {
            margin-top: 25px;
            padding: 20px;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(45, 212, 191, 0.12));
            border: 1px solid rgba(16, 185, 129, 0.2);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .breathing-exercise h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--color-wellbeing);
        }

        .breathing-circle {
            width: 140px;
            height: 140px;
            margin: 0 auto 18px;
            border-radius: 50%;
            background: rgba(16, 185, 129, 0.18);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-wellbeing);
            position: relative;
            transition: transform 3s ease-in-out, background 0.6s ease-in-out, box-shadow 0.6s ease-in-out;
            box-shadow: inset 0 0 0 2px rgba(16, 185, 129, 0.5);
        }

        .breathing-circle::after {
            content: '';
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            border: 2px dashed rgba(16, 185, 129, 0.4);
            animation: circlePulse 12s linear infinite;
        }

        @keyframes circlePulse {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .breathing-circle.inhale {
            transform: scale(1.1);
            background: rgba(16, 185, 129, 0.28);
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.35);
        }

        .breathing-circle.hold {
            transform: scale(1.05);
            background: rgba(20, 184, 166, 0.24);
        }

        .breathing-circle.exhale {
            transform: scale(0.92);
            background: rgba(5, 150, 105, 0.18);
            box-shadow: inset 0 0 0 2px rgba(5, 150, 105, 0.45);
        }

        .breathing-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .breathing-controls button {
            padding: 10px 18px;
            border-radius: 999px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
        }

        .breathing-controls button:disabled {
            cursor: not-allowed;
            opacity: 0.6;
            box-shadow: none;
        }

        #breathing-start {
            background: var(--color-wellbeing);
            color: white;
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.35);
        }

        #breathing-start:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.45);
        }

        #breathing-stop {
            background: rgba(148, 163, 184, 0.15);
            color: var(--color-text);
            box-shadow: 0 5px 20px rgba(148, 163, 184, 0.25);
        }

        #breathing-stop:not(:disabled):hover {
            transform: translateY(-2px);
            background: rgba(148, 163, 184, 0.25);
        }

        .breathing-instructions {
            text-align: center;
            font-size: 0.95rem;
            color: var(--color-text-light);
            line-height: 1.5;
        }
        #learning h2 { 
            background: var(--color-learning-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* --- Progress Bar --- */
        .progress-bar-container {
            width: 100%;
            height: 8px;
            background-color: var(--color-border);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 25px;
            position: relative;
        }

        .progress-bar-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            border-radius: 10px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0) 0%, 
                rgba(255, 255, 255, 0.4) 50%, 
                rgba(255, 255, 255, 0) 100%);
        }

        /* Color-coding progress bars with gradients */
        #work .progress-bar { background: var(--color-work-gradient); }
        #wellbeing .progress-bar { background: var(--color-wellbeing-gradient); }
        #learning .progress-bar { background: var(--color-learning-gradient); }

        /* --- Task List --- */
        .task-list {
            list-style: none;
            flex-grow: 1;
            margin-bottom: 25px;
        }

        .task-list li {
            display: flex;
            align-items: center;
            padding: 14px 10px;
            border-bottom: 1px solid var(--color-border);
            font-size: 0.95rem;
            transition: all 0.2s ease;
            border-radius: 8px;
            margin-bottom: 4px;
        }

        .task-list li:last-child {
            border-bottom: none;
        }

        .task-list li:hover {
            background-color: #f8fafc;
            padding-left: 14px;
        }

        .task-list input[type="checkbox"] {
            margin-right: 14px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--color-work);
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        #work .task-list input[type="checkbox"] { accent-color: var(--color-work); }
        #wellbeing .task-list input[type="checkbox"] { accent-color: var(--color-wellbeing); }
        #learning .task-list input[type="checkbox"] { accent-color: var(--color-learning); }

        .task-list label {
            flex-grow: 1;
            color: var(--color-text);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        /* Strikethrough for completed tasks */
        .task-list input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            color: var(--color-text-light);
            opacity: 0.6;
        }

        .delete-btn {
            background: none;
            border: none;
            color: var(--color-text-light);
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            padding: 5px 8px;
            opacity: 0;
            transition: all 0.2s ease;
            border-radius: 6px;
        }

        .task-list li:hover .delete-btn {
            opacity: 0.6;
        }

        .delete-btn:hover {
            opacity: 1 !important;
            background-color: #fee2e2;
            color: #dc2626;
            transform: scale(1.1);
        }

        /* --- Add Task Input --- */
        .add-task {
            display: flex;
            margin-top: auto;
            gap: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 12px;
            overflow: hidden;
        }

        .add-task input[type="text"] {
            flex-grow: 1;
            border: 2px solid var(--color-border);
            padding: 12px 16px;
            font-size: 0.95rem;
            border-radius: 12px 0 0 12px;
            outline: none;
            transition: all 0.3s ease;
            background-color: #f8fafc;
            font-weight: 500;
        }

        .add-task input[type="text"]:focus {
            background-color: white;
            border-color: var(--color-work);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Color-coding input focus */
        #work .add-task input[type="text"]:focus { 
            border-color: var(--color-work); 
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        #wellbeing .add-task input[type="text"]:focus { 
            border-color: var(--color-wellbeing); 
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        #learning .add-task input[type="text"]:focus { 
            border-color: var(--color-learning);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
        }

        .add-task button {
            border: none;
            color: white;
            font-size: 1.75rem;
            font-weight: bold;
            padding: 0 22px;
            border-radius: 0 12px 12px 0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .add-task button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .add-task button:hover::before {
            width: 300px;
            height: 300px;
        }

        .add-task button:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .add-task button:active {
            transform: scale(0.98);
        }

        /* Color-coding add buttons with gradients */
        #work .add-task button { background: var(--color-work-gradient); }
        #wellbeing .add-task button { background: var(--color-wellbeing-gradient); }
        #learning .add-task button { background: var(--color-learning-gradient); }

        /* Responsive Design */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.25rem;
            }
            
            #quote {
                font-size: 1rem;
                padding: 0 20px;
            }
            
            .content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .category {
                padding: 25px 20px;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>My Daily Dashboard</h1>
        <p id="quote">Loading motivational quote...</p>
    </header>

    <main class="content">
        <section class="category" id="work">
            <h2>💼 Work</h2>
            <div class="progress-bar-container">
                <div class="progress-bar" id="work-progress"></div>
            </div>
            <ul class="task-list" id="work-tasks">
                </ul>
            <div class="add-task">
                <input type="text" id="work-input" placeholder="New work task...">
                <button data-category="work" aria-label="Add work task">+</button>
            </div>
        </section>

        <section class="category" id="wellbeing">
            <h2>🧘 Wellbeing</h2>
            <div class="progress-bar-container">
                <div class="progress-bar" id="wellbeing-progress"></div>
            </div>
            <ul class="task-list" id="wellbeing-tasks">
                </ul>
            <div class="add-task">
                <input type="text" id="wellbeing-input" placeholder="New wellbeing goal...">
                <button data-category="wellbeing" aria-label="Add wellbeing task">+</button>
            </div>
            <div class="breathing-exercise" aria-labelledby="breathing-title">
                <h3 id="breathing-title">4-7-8 Breathing Exercise</h3>
                <div class="breathing-circle" role="status" aria-live="polite">
                    <span id="breathing-phase">Ready when you are</span>
                </div>
                <div class="breathing-controls">
                    <button id="breathing-start">Start</button>
                    <button id="breathing-stop" disabled>Reset</button>
                </div>
                <p class="breathing-instructions">Follow the prompts to inhale for 4 counts, hold for 7, and exhale for 8. Repeat a few cycles to calm your mind.</p>
            </div>
        </section>

        <section class="category" id="learning">
            <h2>📚 Learning</h2>
            <div class="progress-bar-container">
                <div class="progress-bar" id="learning-progress"></div>
            </div>
            <ul class="task-list" id="learning-tasks">
                </ul>
            <div class="add-task">
                <input type="text" id="learning-input" placeholder="New learning objective...">
                <button data-category="learning" aria-label="Add learning task">+</button>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- STATE MANAGEMENT ---
            // Load tasks from localStorage or initialize as empty
            let tasks = JSON.parse(localStorage.getItem('dashboardTasks')) || {
                work: [],
                wellbeing: [],
                learning: []
            };

            // --- SELECTORS ---
            const quoteEl = document.getElementById('quote');
            const taskLists = {
                work: document.getElementById('work-tasks'),
                wellbeing: document.getElementById('wellbeing-tasks'),
                learning: document.getElementById('learning-tasks')
            };
            const inputs = {
                work: document.getElementById('work-input'),
                wellbeing: document.getElementById('wellbeing-input'),
                learning: document.getElementById('learning-input')
            };
            const progressBars = {
                work: document.getElementById('work-progress'),
                wellbeing: document.getElementById('wellbeing-progress'),
                learning: document.getElementById('learning-progress')
            };
            const addButtons = document.querySelectorAll('.add-task button');
            const allTaskLists = document.querySelectorAll('.task-list');
            const breathingPhase = document.getElementById('breathing-phase');
            const breathingCircle = document.querySelector('.breathing-circle');
            const breathingStartBtn = document.getElementById('breathing-start');
            const breathingStopBtn = document.getElementById('breathing-stop');

            // --- QUOTE FUNCTION ---
            const quotes = [
                "The secret of getting ahead is getting started.",
                "Your future is created by what you do today, not tomorrow.",
                "Well done is better than well said.",
                "Discipline is the bridge between goals and accomplishment.",
                "The only way to do great work is to love what you do.",
                "Don't watch the clock; do what it does. Keep going.",
                "Success is the sum of small efforts, repeated day in and day out.",
                "A little progress each day adds up to big results."
            ];

            function loadQuote() {
                const today = new Date().toDateString();
                const cached = JSON.parse(localStorage.getItem('dailyQuote'));

                if (cached && cached.date === today) {
                    quoteEl.textContent = `"${cached.quote}"`;
                } else {
                    const randomIndex = Math.floor(Math.random() * quotes.length);
                    const newQuote = quotes[randomIndex];
                    localStorage.setItem('dailyQuote', JSON.stringify({ quote: newQuote, date: today }));
                    quoteEl.textContent = `"${newQuote}"`;
                }
            }

            // --- CORE FUNCTIONS ---
            function saveTasks() {
                localStorage.setItem('dashboardTasks', JSON.stringify(tasks));
            }

            function renderTasks() {
                // Loop over each category (work, wellbeing, learning)
                for (const category in tasks) {
                    const taskListEl = taskLists[category];
                    taskListEl.innerHTML = ''; // Clear existing list

                    if (tasks[category].length === 0) {
                        taskListEl.innerHTML = '<li style="color: #999; justify-content: center; border: none;">No tasks yet.</li>';
                    } else {
                        tasks[category].forEach(task => {
                            const li = document.createElement('li');
                            const checkboxId = `task-${task.id}`;

                            li.innerHTML = `
                                <input type="checkbox" id="${checkboxId}" data-id="${task.id}" data-category="${category}" ${task.completed ? 'checked' : ''}>
                                <label for="${checkboxId}">${task.text}</label>
                                <button class="delete-btn" data-id="${task.id}" data-category="${category}" aria-label="Delete task">&times;</button>
                            `;
                            taskListEl.appendChild(li);
                        });
                    }
                    // Update progress bar after rendering
                    updateProgress(category);
                }
            }

            function addTask(category, text) {
                if (text === '') return; // Don't add empty tasks

                const task = {
                    id: Date.now(),
                    text: text,
                    completed: false
                };

                tasks[category].push(task);
                saveTasks();
                renderTasks();
                inputs[category].value = ''; // Clear input field
            }

            function toggleTask(category, id) {
                const task = tasks[category].find(t => t.id == id);
                if (task) {
                    task.completed = !task.completed;
                    saveTasks();
                    renderTasks(); // Re-render to update strikethrough and progress
                }
            }

            function deleteTask(category, id) {
                // Filter out the task with the matching id
                tasks[category] = tasks[category].filter(t => t.id != id);
                saveTasks();
                renderTasks();
            }

            function updateProgress(category) {
                const categoryTasks = tasks[category];
                const totalTasks = categoryTasks.length;

                if (totalTasks === 0) {
                    progressBars[category].style.width = '0%';
                    return;
                }

                const completedTasks = categoryTasks.filter(t => t.completed).length;
                const percentage = (completedTasks / totalTasks) * 100;
                
                progressBars[category].style.width = `${percentage}%`;
            }

            // --- EVENT LISTENERS ---

            // 1. Add Task Buttons
            addButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const category = button.dataset.category;
                    const text = inputs[category].value.trim();
                    addTask(category, text);
                });
            });

            // 2. Add Task on 'Enter' keypress
            for (const category in inputs) {
                inputs[category].addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const text = inputs[category].value.trim();
                        addTask(category, text);
                    }
                });
            }

            // 3. Click handling for Checkboxes and Delete Buttons (Event Delegation)
            allTaskLists.forEach(list => {
                list.addEventListener('click', (e) => {
                    const target = e.target;
                    const category = target.dataset.category;
                    const id = target.dataset.id;

                    if (!category || !id) return; // Exit if not a target element

                    if (target.type === 'checkbox') {
                        toggleTask(category, id);
                    }

                    if (target.classList.contains('delete-btn')) {
                        deleteTask(category, id);
                    }
                });
            });

            // --- BREATHING EXERCISE ---
            if (breathingStartBtn && breathingStopBtn && breathingPhase && breathingCircle) {
                const breathingPhases = [
                    { label: 'Breathe in', duration: 4000, className: 'inhale' },
                    { label: 'Hold', duration: 7000, className: 'hold' },
                    { label: 'Breathe out', duration: 8000, className: 'exhale' }
                ];

                let breathingTimeout;
                let breathingDelayTimeout;
                let breathingRunning = false;

                function setBreathingState(text, className) {
                    breathingPhase.textContent = text;
                    breathingCircle.classList.remove('inhale', 'hold', 'exhale');
                    if (className) {
                        breathingCircle.classList.add(className);
                    }
                }

                function runBreathingCycle(index = 0) {
                    if (!breathingRunning) return;

                    const phase = breathingPhases[index];
                    setBreathingState(phase.label, phase.className);

                    breathingTimeout = setTimeout(() => {
                        const nextIndex = (index + 1) % breathingPhases.length;
                        runBreathingCycle(nextIndex);
                    }, phase.duration);
                }

                function startBreathing() {
                    if (breathingRunning) return;
                    breathingRunning = true;
                    breathingStartBtn.disabled = true;
                    breathingStopBtn.disabled = false;
                    runBreathingCycle();
                }

                function stopBreathing() {
                    breathingRunning = false;
                    clearTimeout(breathingTimeout);
                    clearTimeout(breathingDelayTimeout);
                    breathingTimeout = null;
                    breathingDelayTimeout = null;
                    setBreathingState('Ready when you are');
                    breathingStartBtn.disabled = false;
                    breathingStopBtn.disabled = true;
                }

                breathingStartBtn.addEventListener('click', () => {
                    if (breathingRunning) return;
                    breathingStartBtn.disabled = true;
                    setBreathingState('Get comfortable...', 'hold');
                    breathingDelayTimeout = setTimeout(() => {
                        if (document.hidden) {
                            stopBreathing();
                            return;
                        }
                        startBreathing();
                    }, 1200);
                });

                breathingStopBtn.addEventListener('click', stopBreathing);

                document.addEventListener('visibilitychange', () => {
                    if (document.hidden && breathingRunning) {
                        stopBreathing();
                    }
                });
            }

            // --- INITIAL LOAD ---
            loadQuote();
            renderTasks();

        });
    </script>

</body>
</html>